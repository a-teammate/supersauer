// standard menu definitions
// don't modify, add personal menus to autoexec.cfg instead
newgui serverextinfo [
	guinoautotab [
		guiserverpreview
	]
] "Server Preview"

newgui serverdemos [
	guiserverdemos

]
/////FARBEN //colors: ^fx when x is:
//			case '0': color = bvec( 64, 255, 128); break;   // green: player talk
//            case '1': color = bvec( 96, 160, 255); break;   // blue: "echo" command
 //           case '2': color = bvec(255, 192,  64); break;   // yellow: gameplay messages 
 //           case '3': color = bvec(255,  64,  64); break;   // red: important errors
 //           case '4': color = bvec(128, 128, 128); break;   // grey
 //           case '5': color = bvec(192,  64, 192); break;   // magenta
  //          case '6': color = bvec(255, 128,   0); break;   // orange
  //          case '7': color = bvec(255, 255, 255); break;   // white
//			case '8': color = bvec(192, 128,   0); break;	//	dark orange	: IRC client	
//			case '9': color = bvec( 64, 255, 255); break;	//	cyan
//			case 'a': color = bvec(  0, 128, 255); break;	//  green blue
//			case 'b': color = bvec(  0,   0,   0); break;	//  black
//			case 'g': color = bvec(  0, 128,   0); break;	//  dark green
//			case 'G': color = bvec(  0, 255,   0); break;	//  light green
//			case 'p': color = bvec(255,  64, 192); break;	//  diffuse pink
//			case 'P': color = bvec(255,   0, 255); break;	//  light pink
//			case 'y': color = bvec(255, 255,   0); break;	//  yellow

togglemainmenu = [
    if (! (cleargui 1)) [
        showgui main
    ]
]
createine = [
	if (strcmp "" (getalias $arg1)) [
		alias $arg1 $arg2
	]
]

append = [
	$arg1 = (concat (getalias $arg1) $arg2)
]
bind ESCAPE [togglemainmenu]
deinclanname = "|Clan|Name"
deinname = "Name   "
zeigemirnamen = 0

newgui main [
 guilist [
 guilist [
	guibutton (concat "name:" (getname)) [showgui choosename] (playermodelicon) "That's your Name, dummy."
  guibutton (concat "model:" (playermodelname)) [guirolloveraction = (playermodelbutton $playermodel); showgui playermodel] (playermodelicon) "Select Your Playermodel and modify the skins"
    guilist [
        guibutton "crosshair: " [showgui crosshair] (playermodelicon) "select your crosshair"
        guiimage (getcrosshair) [showgui crosshair] 0.5
    ]
     guibar	
	 if (movierecording) [
			guibutton "stop movie" "movie" "exit"
		]
    guibutton "server browser.."  "showgui servers; exec data/serverbrowser.cfg" menu
    if (isconnected) [
        guibar
        if (|| $editing (m_edit (getmode))) [
            guibutton "editing.." "showgui editing"
        ]
		
        guibutton "vote game mode / map.." "showgui gamemode"
        // guibutton "lanconnect"
        // guibutton "connect localhost"
        if (isteammode) [ guibutton "switch team" [if (strcmp (getteam) "good") [team evil] [team good]] ]
        guibutton "toggle spectator" [spectator (! (isspectator (getclientnum)))] "spectator"
        guibutton "master.." [showgui master]
        guibar
        guibutton "options.."  "showgui options"
		guibutton "SuperSauer"      "showgui supersauer" "super"
		if (ircnumchans) [ guibutton "IRC-Chat" "showgui irc" menu "Shows your open IRC-Chat (^f3Beta^f7)"	]
		if (isconnected 0 0) [ guibutton "download demos.." "showgui serverdemos" menu "If this server records Demos, you can download them in this menu"]
	   guibutton "disconnect" "disconnect"         "exit"
		
    ] [
        guibutton "Offline Fun"      "showgui offline" menu "A match vs bots, a campaign or just create some maps on your own."
        guibar
        guibutton "options.."        "showgui options" "options"
		guibutton "SuperSauer"      "showgui supersauer" "super"		
		if (ircnumchans) [ guibutton "IRC-Chat" "showgui irc" menu "Shows your open IRC-Chat (^f3Beta^f7)"	]
		guibutton "About" "showgui about"	
        guibutton "quit"             "quit"                 "exit"
		
    ]
	     ]		
]
] 0
newgui choosename [
    guilist [
        guitext "name: " (playermodelicon)
        newname = (getname)
        guifield newname 15 [name $newname]		
    ]
	guistayopen [   
		guilist [
		guibutton  $deinname [if (= (strcmp $deinname "  ") 0) [ name $deinname] [ name "Name" ] ] "super"	
		guistrut 1
		guibutton  $deinclanname [if (= (strcmp $deinclanname "") 0) [ name $deinclanname] [ name "|Clan|Name" ] ] "super"	
       ]
	   guibar
	   guistayopen [
	   guicheckbox "Options:" zeigemirnamen  1 0 "" "select which names to shortcut"
	    createine zeigemirnamen 0
		createine deinname ""
		createine deinclanname ""
	   if $zeigemirnamen [	       
				guilist [ 
					guitext "Name-option 1: " "0" 
					guifield deinname 15 
				]
				guilist [ 
					guitext "Name-option 2: " "0"
					guifield deinclanname 15 
				]		
		]  
		]
	]
]
ircmsg = ""
newchan = ""

newgui irc [
	guistayopen [
		createine sirc 0
		if (ircconnected) [	
			if (ircnumchans) [
			
					guilist  [
						guitext "Channels:   "
						loop ic (ircnumchans) [
							guibutton (format "%1    " (ircgetchanname $ic) ) [ircsetcurchan @ic] 0
						]
						guitext "^fG+ " 0
						guifield newchan 10 [ ircsay (concat "/join" $newchan); newchan = ""] "Join another channel"
						
						guitext "   " 0
						guibar 
						guibar
						guibutton "^f3IRC-Disconnect" "ircdisconnect" exit
					]
					guilist [
						guistrut 30 1
						guilist [
							guistrut 60 1
							guiircbuffer
						]
						guibar
						guilist [
							//guibutton "^f3Disconnect" "ircdisconnect" exit
							guiircnames
							]		
					]
					guifield ircmsg 80 [ ircsay $ircmsg; ircmsg = "" ]
				]	[
					if (ircattempting) [
							guitext "^f9Establishing.."
							guitext "^f2Please wait till the server accepted your Connection"
					]	[
							guitext "^f3Not able to connect."
							guibutton "^fGRe^fgconnect" "irc irc.GameSurge.net" "update"
							
							guistrut 2
							guicheckbox "^f4more.." sirc 
							if ($sirc) [
								guilist [
									guitext "Nickname: " 0 "You can change your nick afterwards by typing ^fs^f1nick yourname^fr into the textline"
									guifield ircnick 20 [ if (< (strlen $ircnick) 2) [ ircnick (getname) ] ]
								]
							]							
					]
				]
			]	[
			guilist [
				guitext "Nickname: " 0 "You will be connected to an instant messenger (IRC).\n Please be patient for answers, we are not 24/7 available."
				guifield ircnick 20 [ if (< (strlen $ircnick) 2) [ ircnick (getname) ] ]
			]
		
			guibutton "^fGC^fgonnect" "irc irc.GameSurge.net"
			guistrut 2
			guicheckbox "^f4more.." sirc 
			if ($sirc) [
				guilist [
					guitext "Channel: " 0 "Default: #supersauer (Supportchannel). You can change the channel ^nafterwards by typing ^f1join^ #channel^f7 into the textline."
					guifield ircjoinchan 20
				]
			]
		]
	]
]
newgui cube2credits [
    guitext "Cube 2: Sauerbraten"
    guitext [by Wouter van Oortmerssen, Lee "eihrul" Salzman,]
    guitext [Mike "Gilt" Dysart, Robert "baby-rabbit" Pointon,]
    guitext [John "geartrooper" Siar, Quinton "Quin" Reeves, and others]
    guitext "(for a full list of contributors see the readme)"
    guitext "http://sauerbraten.org/"
] "Credits"

newgui about [
	guititle "The SuperSauer Mod"
	guitext "^f3New Contributors wanted!"
	guistrut 1
	guilist [
		guibutton "^f1Contact us ^f4(ingame irc)" "showgui irc" menu "You will be connected to an Instant Messenger.^nMaybe some guys there can help you. ^nIf they have time."
	]
	guibar
	guilist [
		guilist [
			guitext "^f6a_teammate " 0
			guitext "^f2Trixxer  " 0 
			guitext "^f2Lye  " 0
			guitext "^f2Q009 " 0
			guitext "^f2pix " 0
		]
		guistrut 1
		guilist [
			guitext "(main development)" 0
			guitext "(statshud & scoreboard & more)" 0
			guitext "(serverbrowser-parts)" 0
			guitext "(sehud & progressbar code)" 0
			guitext "(menu-cleanups & icons)" 0
		]
	]
	guibar
    guibutton "Based on Cube 2: Sauerbraten" "showgui cube2credits" 0
]
exec data/serverbrowser.cfg

/////////////////DEMO CONTROL //////////////
list_de = ""
loopfiles f $demosdir "dmo"   [append list_de $f] 
loopfiles f "" "dmo" [append list_de $f]
curdemo = ""
newgui demoext [
guistayopen [
	guidemoextinfo 
	guibar
	guilist [
		
		guibutton "Cancel" "cleargui 1" "exit"
		guitext "               " 0
		guitext "Start Min:" 0
        newstartmin = $demostartmin
        guifield newstartmin 8 [demostartmin $newstartmin]
		guibutton "^f9Jump to Event" "showgui demoextevent" "arrow_fw"
		guitext "          " 0
		guibutton "Watch" (format "demo %1" (getcurdemoinfopath)) "arrow_fw"
	]
]
] "Demo Info"

newgui demoextevent [
guistayopen [
	guititle "Event overview"
	guilist [
		guitext "Show Happenings: "
		guicheckbox "Scores     " demoeventscore
		guicheckbox "Text     " demoeventtext
		guicheckbox "Frags     " demoeventfrags
	]
	guinoautotab [
	guidemoextevents [	guibar
	guilist [
		guibutton "Back" "cleargui 1" "exit"
		guitext "               " 0
		guitext "Start Min:" 0
        newstartmin = $demostartmin
        guifield newstartmin 8 [demostartmin $newstartmin]

		guitext "          " 0
		guibutton "Watch" (format "demo %1" (getcurdemoinfopath)) "arrow_fw"
	]
	]
	]
]
] "Demo Info"
newgui demobrowser [
	guilist [ 
		guitext "Search: " "0"
		guifield demofiltername 40
		]
	guilist [
		guitext "frags >=" "0"
		guifield demofilterfrags 3
	]
	guibar
	guidemobrowser
]
newgui demoextinfo [
guistayopen [
	guilist [
	guilist [	
  looplist thm $list_de [ guibutton $thm (format "demopreview %1" $thm) ] 
]
]
guidemoextinfo
]
]
showdemobrowser = [
				list_de = ""; 
				loopfiles f $demosdir "dmo" [append list_de $f]; 
				loopfiles f "" "dmo" [append list_de $f]; 
				looplist thm $list_de [ demopreview $thm ];
				showgui demobrowser
				]

newgui supersauer [
	guistayopen [
		guialign 0 [
		guilist [		
			guititle "Background"
			guicheckbox "Original Background" su_originalbg 1 0 0 "Enables the original Sauerbraten Background and the original Loading Screen again"
			guistrut 1		
			if (! $su_originalbg) [
				guicheckbox "3D Box" su_mainmenu 1 0 0 "If enabled, the background will be a cube and performs a rotation every time you closed or opened another gui."
				guicheckbox "Xtra-effect" su_dunsttexture 1 0 0 "If enabled, this will add some motion to the background image and gives a bit the illusion of moving fog"

				bgr_list = ""
				loopfiles f "data/background/" "jpg" [				
					append bgr_list $f
				]
				guibar
				guitext "Background Images:" "" "Background Images Folder is ^fs^f3/data/background/^fr., but you can put your own JPGs^nthere to see them listed here."	
				guilist [
					loop cnt (+ (div (listlen $bgr_list) 8) 1) [ 
						guilist [	
							loop cntt (min 8 (- (listlen $bgr_list) (* $cnt 8))) [
								guilist [
								guibutton (format "^f5%1" (at $bgr_list (+ (* $cnt 8) $cntt) )) (format "su_background data/background/%1.jpg" (at $bgr_list (+ (* $cnt 8) $cntt) ) )
								]
							]
							guitext "          " 0
						]
					]
				]
			]
		]
		guitext "   ""0"
		guibar
		guitext "   ""0"					
		guilist [ //guiskin stuff
			guititle "Guiskin ""0" 

				skin_list = ""
				loopfiles f "data/themes" "" [				
					if (< ( strstr $f "." ) 0) [
						append skin_list $f
					]
				]		
				guilist [
					loop cnt (+ (div (listlen $skin_list) 6) 1) [ 
						guilist [	
							loop cntt (min 6 (- (listlen $skin_list) (* $cnt 6))) [
								guilist [
								guibutton (format "^f5%1" (at $skin_list (+ (* $cnt 6) $cntt) )) (format "su_theme %1" (at $skin_list (+ (* $cnt 6) $cntt) ) )
								]
							]
							guitext "          " 0
						]
					]
				]
				
				guitext "Guiskin Transparency:" 0
				guislider su_skinalpha
				
					//	guitext "Background Images Folder is ^f3/data/background/"
					//	guiimage (concatword "<thumbnail:960,540>data/background/" (if (> $numargs 0) [result $arg1] [at $guirollovername 0]) ".jpg") $guirolloveraction 7 2 
				if (&& $su_mainmenu (! $su_originalbg)) [
					guistrut 1
					guititle "3D-Space Color"
					guistrut 1
					
					guislider su_backgroundcolorr 0 255
					guislider su_backgroundcolorg 0 255
					guislider su_backgroundcolorb 0 255
					
					guicolor (+ (* (+ (* $su_backgroundcolorr 256) $su_backgroundcolorg) 256) $su_backgroundcolorb)
					guibutton "Spin " "showgui supersauer"
				]
			
			]
		]
		//background color slider
		guitab "Appearance"
		
			guititle "Icons"
			icons_list = ""
			loopfiles f "packages/icons/" "" [				
				if (< ( strstr $f "." ) 0) [
					append icons_list $f
				]
			]		
			guialign 0 [
				guilist [
					loop cnt (+ (div (listlen $icons_list) 5) 1) [ 
						guilist [	
							loop cntt (min 5 (- (listlen $icons_list) (* $cnt 8))) [
								guilist [
								guibutton (format "^f1%1  " (at $icons_list (+ (* $cnt 8) $cntt))) (format "su_iconsdir %1" (at $icons_list (+ (* $cnt 8) $cntt)) ) (format "%1/menu" (at $icons_list (+ (* $cnt 8) $cntt)) )
								guitext "   " 0
								]
							]
							if (! $cnt) [ guibutton "^f1default" [su_iconsdir ""] ]
						]
					]		
				]
			]
			guititle Cursor
			cursor_list = ""
			loopfiles f "data/cursor/" "png" [				
					append cursor_list $f
			]			

			loop cnt (+ (div (listlen $cursor_list) 5) 1) [ 
				guialign 0 [	
					loop cntt (min 5 (- (listlen $cursor_list) (* $cnt 5))) [						
						guibutton (format "^f6%1   " (at $cursor_list (+ (* $cnt 5) $cntt))) (format "su_cursor data/cursor/%1.png" (at $cursor_list (+ (* $cnt 5) $cntt)) )
					]
				]
			]
			guistrut 1
			guialign 0 [
				guilist [
					guilist [
						guitext "Size:  " 
						guilist [
							guislider cursorsize 10 50	
							guitext "                                    ""0"
						]
					]
					guilist [ 
						guilist [
							guitext "Cursor Color:  " 
							guibutton "^f4(Reset)" [su_cursorcolr 255;su_cursorcolg 255; su_cursorcolb 255]	
							guicolor (+ (* (+ (* $su_cursorcolr 256) $su_cursorcolg) 256) $su_cursorcolb)
						]
						guilist [
							guislider su_cursorcolr 0 255
							guislider su_cursorcolg 0 255
							guislider su_cursorcolb 0 255	
							guitext "                             ""0"	
						]
					]
				]
			]
		
			guibar
			guitext "   ""0"
			guialign 0 [
				guilist [
					guilist [ 
						guilist [ 		
							guibutton "Text Overlay Color: (Reset)" [ su_howercolorr 255; su_howercolorg 10; su_howercolorb 0;]					
							guilist [
								guicolor (+ (* (+ (* $su_howercolorr 256) $su_howercolorg) 256) $su_howercolorb)
							]
							guislider su_howercolorr 0 255
							guislider su_howercolorg 0 255
							guislider su_howercolorb 0 255
						]
						
						guitext "   ""0"
						guitext "   ""0"
						guilist [ 
							guibutton "Shot Color           (Reset)" [su_shotcolorr 64;su_shotcolorg 64; su_shotcolorb 64]					
							guilist [    
								guicolor (+ (* (+ (* $su_shotcolorr 256) $su_shotcolorg) 256) $su_shotcolorb)
							]
							guislider su_shotcolorr 0 255
							guislider su_shotcolorg 0 255
							guislider su_shotcolorb 0 255
						]
					]
				]
			]		
	
		guitab "Menus"         ////////////////////////////
			guititle "Scoreboard"
			guilist [
				guitext "Modules:   "
				guilist [
					guicheckbox "^f5ping  " showping
					guicheckbox "^f5pj" showpj
				]
				guistrut 3
				guilist [
					guicheckbox "^f5clientnum  " showclientnum
					guicheckbox "^f5flags  " su_showflags
				]
				guistrut 3
				guilist [
					guicheckbox "^f5frags" su_showfrags
					guicheckbox "^f5accuracy   " su_showaccuracy
				]
			    guilist [
					guicheckbox "^f5deaths  " su_showdeaths
					guicheckbox "^f5kpd " su_showkpd
				]
			]

			guibar
			guistrut 1
			guititle "Serverbrowser"
			guicheckbox "Server Preview" su_serverbrowser
			guicheckbox "Favorite Server on top" su_serverbrowserfavs
			guistrut 1
			guibutton "^f0More Settings: (own favorite server, new clans, ..)" "showgui serveredit"
			guistrut 1
			guilist [
				guitext "Modules:   "  
				guilist [		
				guicheckbox "^f5clientnum   " su_sbclientnum
				guicheckbox "^f5ping" su_sbping
				]
				guilist [
				guicheckbox "^f5flags   " su_sbflags
				guicheckbox "^f5frags" su_sbfrags
				]
				guilist [
				guicheckbox "^f5accuracy   " su_sbaccuracy
				guicheckbox "^f5deaths" su_sbdeaths
				
				]
				guilist [
					guicheckbox "^f5teamkills" su_sbteamkills
				]
			]
	
		guitab "HUD"           ////////////////////////////
				guititle "Ingame Stats-HUD"
				guistrut 1

				guilist [ 	 
					guitext "Modules:   "
					guilist [
						guicheckbox "^f5Time"     su_statstime [ON OFF 0]
						guicheckbox "^f5KpD"       su_statskpd [ON OFF 0] 
					 ]
					 guitext "     " 0
					guilist [
						guicheckbox "^f5Frags"     su_statsfrags [ON OFF 0]
						guicheckbox "^f5Accuracy"  su_statsacc [ON OFF 0]                   
					]
					guitext "   " 0
					guilist [
						guicheckbox "^f5Damage"    su_statsdamage [ON OFF 0] 
						guicheckbox "^f5Deaths"    su_statsdeaths [ON OFF 0]         
					]
					guitext "  " 0
					guilist [
						guicheckbox "^f5Endstats prediction" su_statsendstats 1 0 "" "how many frags you will assumedly have at the end"
					]					
				]		
				guistrut 1
				guilist [
					guitext "Size: "		
					guilist [
						guislider su_statssize 70 180
						guitext "                                                     " 0
					]
				]

				createine showpos 0		
				createine showcolor 0 
				guialign 0 [
						guicheckbox "Adjust Position            " showpos
												
						guicheckbox "Adjust ^f0C^f1o^f2l^f3o^f5r" showcolor
					
				]
				if $showpos [
					guilist [
						guialign -1 [
							guilist [
								guitext "Width:            " 0
								guifield [su_statsposx]	
								guitext "        " 0								
							]				 
							guislider [su_statsposx] 0 1300				
						]
						guitext" " 0
						guitext" " 0			 
						guialign 1 [
							guilist [
								guitext "Height:            " 0
								guifield [su_statsposy]	
								guitext "        " 0								
							]				 
							guislider [su_statsposy] 0 1300				
						]
					]	 
				]
				if ($showcolor) [
					guilist [			
						guitext "Name in :   "								
						guiradio "0Green" su_statscolor 0 [su_statscolor 0]
						guitext "  " 0
						guiradio "1Blue"   su_statscolor 1 [su_statscolor 1]
						guitext "  " 0
						guiradio "2Yellow" su_statscolor 2 [su_statscolor 2]
						guitext "  " 0
						guiradio "3Red"    su_statscolor 3 [su_statscolor 3]
						guitext "  " 0
						guiradio "4Grey"   su_statscolor 4 [su_statscolor 4]
						guitext "  " 0
						guiradio "5Violet" su_statscolor 5 [su_statscolor 5]
						guitext "  " 0
						guiradio "6Orange" su_statscolor 6 [su_statscolor 6]
						guitext "  " 0
						guiradio "7White"  su_statscolor 7 [su_statscolor 7]						
					]
					guilist [
						guitext "Value in :   "						
						guiradio "0Green" su_statscolorw 0 [su_statscolorw 0]
						guitext "  " 0
						guiradio "1Blue"   su_statscolorw 1 [su_statscolorw 1]
						guitext "  " 0
						guiradio "2Yellow" su_statscolorw 2 [su_statscolorw 2]
						guitext "  " 0
						guiradio "3Red"    su_statscolorw 3 [su_statscolorw 3]
						guitext "  " 0
						guiradio "4Grey"   su_statscolorw 4 [su_statscolorw 4]
						guitext "  " 0
						guiradio "5Violet" su_statscolorw 5 [su_statscolorw 5]
						guitext "  " 0
						guiradio "6Orange" su_statscolorw 6 [su_statscolorw 6]
						guitext "  " 0
						guiradio "7White"  su_statscolorw 7 [su_statscolorw 7]
					]
				]
				guistrut 1
				guibar 
				guialign 0 [
					guicheckbox "SauerEnhanced Hud" su_selogo 1 0 "" "a futuristic HUD-Version. (the Healthammount, Weapons, Ammobar, ..)"
					]
				guibar
				guialign 0 [
					guilist [
						guicheckbox "Match-Info Row" su_hudline 1 0 "" "e.g. for a clanwar : ^fs^f0clanA vs clanB^fr, a duel ..."
						if ($su_hudline) [
							guicheckbox "Show Best Player-Row" su_hudlineminisb 1 0 "" "e.g.: ^f01. Player1 (10 frags) "
							guilist [
								guitext "Scale:  "
								guilist [
									guislider su_hudlinescale 
									guitext "                                 " 0
								]
							]
						
						]
					]
				]
		guitab "Demos/Screens" ////////////////////////////

			guititle "Auto_Rename" "Renames Your Demos and Screenshots automatically (to get demos type /listdemos and then /getdemo <number>^nTo save screenshots either enable the auto screenshot button above, write /screenshot <name> or press F12"
			
			guistrut 1
			guicheckbox "download demos as ^fs^f2date_hour_min_mode_map.dmo^fr" su_renamedemos
			guicheckbox "save screenshots as ^fs^f2date_hour_min_mode_map^fr"	su_renamescreens 
			guistrut 1
			
			guititle "Automatic Screenshots" 
			guilist [
				guilist [
					guicheckbox "after Clanwars" su_autoscreenshotscw 1 0 ""
					guicheckbox "after Duels" su_autoscreenshotsduel 1 0 ""
				]
				guitext "           " 0
				guialign 0 [
					guicheckbox "in seperate folders " su_autoscreenshotseperatedirs
				]
			]
			guibar
			guistrut 1
			guialign 0 [
			guilist [
			guibutton "^f0Demobrowser ^f7- Your Demos" 	[ showdemobrowser ]
			if (isconnected 0 0) [ guibutton "^f0Download Demos from the Server" "showgui serverdemos" "server" ]
			guistrut 1
			]
			]
			guibar 
			guilist [
				guitext "screenshots directory: " "0" "this is the subdirectory where your screenshots will be saved. ^nOn Windows they could eg go to ^fs^f0Documents/My Games/Supersauer/Screenies^fr"
				guifield screenshotdir 50
			]				
			guilist [
				guitext "Save in:   " 0
				guiradio "^f4tga    " screenshotformat 1 [screenshotformat 1] "Lossless, but really big files, best quality" 
				guiradio "^f4png    " screenshotformat 2 [screenshotformat 2] "Medium Sized, slow, good quality" 
				guiradio "^f2JPG   " screenshotformat 3 [screenshotformat 3] "Really Small, fast, good quality" 
			]	
			guistrut 1
						guilist [
				guitext "demos directory:     " "0" "this is the subdirectory where your demos will be saved. ^nOn Windows they could eg go to ^fs^f0Documents/My Games/Supersauer/Demos^fr"
				guifield demosdir 50
			]		
			
		guitab "Misc"         ////////////////////////////
			guititle "Automated Messages"
			guitext "" 0
			guialign 0 [
				guilist [
					guilist [
						guilist [			
							
							guilist [
								guicheckbox "Automaticly Apologize "  su_autosry
								
								guifield su_autosrymsg 15
								guitext " after " 0
								guifield su_autosrydelay 2
								guitext " sec" 0		
							]	
							guitext "" 0
							
							guilist [
								guicheckbox "Automaticly Forgive   "  su_autonp
								
								guifield su_autonpmsg 15
								guitext " after " 0
								guifield su_autonpdelay 2
								guitext " sec " 0
							]
							guitext "" 0
							
							guilist [
								guicheckbox "Automatic goodgame  "  su_autogg 
								
								guifield su_autoggmsg 15
								guitext " after " 0
								guifield su_autoggdelay 2
								guitext " sec" 0
							]
							guistrut 1							 
						
						
								//todo cut clantag
						]
						guialign 0 [
							guicheckbox "With Name" su_sendname 1 0 "" "Send Sorry |Max|Muster! or Sorry!"
							
						]
					]
				]
			]
			guititle "Helper Infos" "This is a Helper info"
			guialign 0	[
				guilist [
					guicheckbox "Show Helper Boxes" su_howerinfo 1 0 
					guistrut 1
					if ($su_howerinfo) [
						guilist [
							guitext "Size:  " 
							guilist [
								guislider su_howerinfoscale 
								guitext "                               " 0
							]
						]
						guilist [
							guitext "Delay:   " 
							guifield su_howerinfodelay 5
							guitext " sec" 0
						]
					]
				]
			]
		guitab "Statistics"
			guicheckbox "Do not count" su_totalstats 0 1
			guibar
			guilist [	
				guitext "  " 0 
				guilist [		
					guitext "^f2Chat Smiles""0"
					guitext "^f2Frags""0"
					guitext "^f2Chainsaw Frags   ""0"
					guitext "^f2Teamkills""0"
					guitext "^f2Deaths      ""0"
					guitext "^f2Suicides""0"
					guitext "^f2Killed by Teammates ""0"
					guitext "^f2Clanwars""0"		
				]
				colorsome = [result (format "^f%1%2" $arg1 (statslog $arg2))]
				guilist [
					guitext (colorsome 7 0)"0"
					guitext (colorsome 7 1)"0"
					guitext (colorsome 7 2)"0"
					guitext (colorsome 7 3)"0"
					
					guitext (colorsome 7 4)"0"
					guitext (colorsome 7 5)"0"
					guitext (colorsome 7 6)"0"
					guitext (colorsome 7 20)"0"
				]	

				guitext "          ""0"
				guilist [
					guitext "^f6Jumps""0"
					guitext "^f6Flags             ""0"
					guitext "^f6Damage"  "0"
					guitext "^f6Quad Damages ""0"
					
					guitext "^f6Health Boosts""0"
					guitext "^f6Ammo Packs""0"
					guitext "^f6Health Packs""0"
					guitext "^f6Duels""0"
				] 	
				guilist [
					guitext (colorsome 7 8)"0"
					guitext (colorsome 7 9)"0"
					guitext (colorsome 7 10)"0"
					guitext (colorsome 7 11)"0"
					
					guitext (colorsome 7 12)"0"
					guitext (colorsome 7 13)"0"
					guitext (colorsome 7 14)"0"
					guitext (colorsome 7 21)"0"
				]
			]	

			guitext (format "You played: %1 weeks | %2 days %3h:%4m:%5s" (statslog 15) (statslog 16) (statslog 17) (statslog 18) (statslog 19))"0"
			guibar
			guibutton "Reset All" "clearstats"
	] //guistayopen
] "Themes"	

genmapitems = [
    looplist curmap $arg1 [
        guibutton $curmap (concat map $curmap) "cube" (getmaptitle $curmap)
    ]
]
//17
goodduelmaps1 = "aard3c academy complex curvy_castle douze duel7 duel8 fanatic_quake frozen industry justice"
goodduelmaps2 = "hashi kffa mbt9 mbt10 ot park ruine simplicity tartech teahupoo turbine"
goodcwmaps1 = "arbana abbey akroseum authentic campo capture_night damnation dust2 face-capture flagstone frostbyte"
goodcwmaps2 = "forge forgotten garden haste l_ctf redemption reissen snapper_rocks tejen tempest wdcd"

ffamaps1 = "akaritori alithia alloy aqueducts  bvdm_01 castle_trap collusion corruption curvedm darkdeath deathtek depot"
ffamaps2 = "dirtndust DM_BS1 dock dune elegy force fragplaza frostbyte fury guacamole gubo hades"
ffamaps3 = "hog2 injustice island kalking1 katrez_d killfactory kmap5 konkuri-to ksauer1 legazzo lostinspace masdm"
ffamaps4 = "mbt2 memento metl2 metl3 metl4 moonlite neondevastation neonpanic nmp8 nucleus oasis oddworld ogrosupply orbe orion osiris"
ffamaps5 = "outpost paradigm pgdm phosgene pitsu_black powerplant refuge renegade rm5 roughinery ruby sauerstruck sdm1 shadowed"
ffamaps6 = "shindou shinmei1 shiva skrdm1 stemple thetowers thor torment tumwalk wake5"
capturemaps1 = "abbey akroseum alithia arabic asgard asteroids c_egypt c_valley campo capture_night caribbean collusion core_refuge core_transfer corruption cwcastle damnation"
capturemaps2 = " donya duomo dust2 eternal_valley evilness face-capture fb_capture fc3 fc4 fc5 forge  hades hallo haste hidden"
capturemaps3 = "infamy killcore3 kopenhagen lostinspace mbt12 mercury monastery nevil_c nitro nmp4 nmp8 nmp9 nucleus ogrosupply paradigm ph-capture reissen"
capturemaps4 = "relic river_c serenity  spcr subterra suburb tempest tortuga turbulence twinforts urban_c valhalla venice xenon"
ctfmaps1 = " arbana asgard  autumn bad_moon berlin_wall bt_falls  catch22 core_refuge core_transfer  desecration "
ctfmaps2 = "eternal_valley europium evilness   hallo  infamy kopenhagen  mach2 mbt1 mbt12"
ctfmaps3 = "mbt4 mercury mill nitro nucleus recovery sacrifice shipwreck siberia snapper_rocks spcr subterra suburb "
ctfmaps4 = "tortuga turbulence twinforts urban_c valhalla  xenon"
conceptmaps = "ladder spiralz canyon secondevermap firstevermap door_demo box_demo platform_demo sauerbraten"
spmaps = "mpsp6a mpsp6b mpsp6c mpsp9a mpsp9b mpsp9c mpsp10 lost level9 k_rpg1 rpg_01"
allmaps = (concat $goodduelmaps1 $goodduelmaps2 $goodcwmaps1 $goodcwmaps2 $ffamaps1 $ffamaps2 $ffamaps3 $ffamaps4 $ffamaps5 $ffamaps6 $capturemaps1 $capturemaps2 $capturemaps3 $capturemaps4 $ctfmaps1 $ctfmaps2 $ctfmaps3 $ctfmaps4 $conceptmaps $spmaps)

showmapshot = [ 
    guibar
    guiimage (concatword "packages/base/" (if (> $numargs 0) [result $arg1] [at $guirollovername 0]) ".jpg") $guirolloveraction 4 1 "data/cube.png"
]
newgui duelmaps [
	guibutton "all maps" "showgui maps"
	guilist [
      guistrut 10 1
      guilist [ guistrut 15 1; genmapitems $goodduelmaps1 ]
      guilist [ guistrut 15 1; genmapitems $goodduelmaps2 ]
      showmapshot
    ]
] "Duel maps"

newgui cwmaps [
	guibutton "all maps" "showgui maps"
	guilist [
      guistrut 11 1
      guilist [ guistrut 15 1; genmapitems $goodcwmaps1 ]
      guilist [ guistrut 15 1; genmapitems $goodcwmaps2 ]
      showmapshot
    ]
] "Clanwar maps"

newgui maps [
	guibutton "own maps" "showcustommaps"
    guilist [
      guistrut 17 1
      guilist [ guistrut 15 1; genmapitems $ffamaps1 ]
      guilist [ guistrut 15 1; genmapitems $ffamaps2 ]
      showmapshot
    ]
    guitab 2
    guilist [
      guistrut 17 1
      guilist [ guistrut 15 1; genmapitems $ffamaps3 ]
      guilist [ guistrut 15 1; genmapitems $ffamaps4 ]
      showmapshot
    ]
    guitab 3
    guilist [
      guistrut 17 1
      guilist [ guistrut 15 1; genmapitems $ffamaps5 ]
      guilist [ guistrut 15 1; genmapitems $ffamaps6 ]
      showmapshot
    ]
    guitab capture
    guilist [
      guistrut 17 1
      guilist [ guistrut 15 1; genmapitems $capturemaps1 ]
      guilist [ guistrut 15 1; genmapitems $capturemaps2 ]
      showmapshot
    ]
    guitab 2
    guilist [
      guistrut 17 1
      guilist [ guistrut 15 1; genmapitems $capturemaps3 ]
      guilist [ guistrut 15 1; genmapitems $capturemaps4 ]
      showmapshot
    ]
    guitab ctf
    guilist [
        guistrut 17 1
        guilist [ guistrut 15 1; genmapitems $ctfmaps1 ]
        guilist [ guistrut 15 1; genmapitems $ctfmaps2 ]
        showmapshot
    ]
    guitab 2
    guilist [
        guistrut 17 1
        guilist [ guistrut 15 1; genmapitems $ctfmaps3 ]
        guilist [ guistrut 15 1; genmapitems $ctfmaps4 ]
        showmapshot
    ]

    guitab concept
    guilist [
        guistrut 17 1
        guilist [ guistrut 15 1; genmapitems $conceptmaps ]
        guilist [ guistrut 15 1 ]
        showmapshot
    ]
]

newgui capturemaps [
    guilist [
      guistrut 17 1
      guilist [ guistrut 15 1; genmapitems $capturemaps1 ]
      guilist [ guistrut 15 1; genmapitems $capturemaps2 ]
      showmapshot
    ]
    guitab 2
    guilist [
      guistrut 17 1
      guilist [ guistrut 15 1; genmapitems $capturemaps3 ]
      guilist [ guistrut 15 1; genmapitems $capturemaps4 ]
      showmapshot
    ]
] "capture maps"

newgui ctfmaps [
    guilist [
        guistrut 17 1
        guilist [ guistrut 15 1; genmapitems $ctfmaps1 ]
        guilist [ guistrut 15 1; genmapitems $ctfmaps2 ]
        showmapshot
    ]
    guitab 2
    guilist [
        guistrut 17 1
        guilist [ guistrut 15 1; genmapitems $ctfmaps3 ]
        guilist [ guistrut 15 1; genmapitems $ctfmaps4 ]
        showmapshot
    ]
] "ctf maps"

custommaps = ""
newgui custommaps [
	guibutton "^f5newmap (default size: 12)"          "newmap $newmapsize"
    guislider "^f6newmapsize" 10 16
	guistrut 1
    looplist curmap $custommaps [
        guibutton $curmap (concat map $curmap) "cube"
    ]
] "custom maps"
showcustommaps = [
    custommaps = ""
    loopfiles curmap "packages/base" "ogz" [
        if (< (indexof $allmaps $curmap) 0) [
            custommaps = (concat $custommaps $curmap)
        ]
    ]
    custommaps = (sortlist $custommaps x y [<=s $x $y])
    showgui custommaps
]

findsuperskins;
playermodelstry0 = "Which orc do you choose when the mission calls for an all-purpose wrecking machine? ^nWho do you call when the odds are stacked against you? Mr. Fixit, that's who.^nGifted with the ability to perform deconstructive surgery with any weapon, this orc gets the ^njob done fast and with extreme prejudice."
playermodelstry1 = "IronSnout X10K is a hybrid model of the IronSnout series. Bred in the bowels of ^na top secret underground facility, this walking fragging machine is for one purpose: to annihilate the opposition. ^nPart pig, part machine, IronSnout X10K knows no fear and fears no fragger."
playermodelstry2 = "Ogro is smaller than a normal ogre, but just as fat and only slightly less stupid. ^nAs opposed to common belief, he is not an evil creature, only killing as is absolutely necessary."
playermodelstry3 = "Inky is the aspiring younger sibling of an infamous transdimensional celebrity. ^nOften teased as being only the 'Lesser Evil', Inky searches the ^nbattlefields for infamy of his own, claiming it one fragger at a time."
playermodelstry4 = "Cannon Jones dared to imbibe the old imported beer can that had languished at the ^nbottom of his refrigerator. Unbeknownst to Cannon, it had been bombarded with stray gamma radiation. ^nAfter some serious indigestion, the mild-mannered Cannon Jones became the mighty Captain Cannon! ^nCaptain Cannon now has only one known weakness: his overbearingly righteous sense of justice."
playermodelstry = [getalias (concatword "playermodelstry" (if (> $numargs 0) [result $arg1] [result $playermodel]))]

macro playermodelbutton [playermodel %1]
pmidx = 0
pmidr = 0

newgui playermodel [
	createine em 2
    guilist [
        guilist [
            loop i $playermodelnum [
                guibutton (playermodelname $i) (playermodelbutton $i) (playermodelicon $i) (playermodelstry $pmidx)
            ]
        ]
		guistayopen [
			guibar
			if (= (strstr $guirolloveraction "playermodel") 0) [
				pmidx = (substr $guirolloveraction (strlen (playermodelbutton "")))
				pmidx = (max 0 (min (- $playermodelnum 1) $pmidx))	
			]
			
			guilist [ //vertikal

			guilist [
				guiplayerpreview $pmidx $em 6 $guirolloveraction 4 1
				guitext "    " 0 
				guialign 0 [
					guicheckbox "^f4force matching player models" forceplayermodels 1 0 "" (concat "all your enemies have the same model you have. ^nAt the moment everyone would be" (playermodelname $playermodel) )
					
					guicheckbox "^f4always use team skins" teamskins 1 0 "" "Even in non-teammodes as instagib or effic,^nYou will see others with the skin specified below (Enemyskin)."
				]
			]		
			guialign 0 [
				guiradio "^f3enemies          " em 2 "em = 2" "Modify the skin of your opponents"
				guiradio "^f1teammates" em 1 "em = 1" "Modify the skin of your teammates"
			]
			guistrut 1
			guilist [ //hor
				guitext "Skins:    " 0 "you can put your own skins here! ^njust rename the new skin in the models dir to <originalskin>_super_<skinname>.ending ^ne.g. ^fs^f0headred_super_brightred.dds^fr (in packages/models/mrfixit)"
				guilist [ //vertikal
					skinlist = (loopsuperskins $pmidr)
					guilist [
						loop cnt (+ (div (listlen $skinlist) 5) 1) [ 
							guilist [	
								loop cntt (min 5 (- (listlen $skinlist) (* $cnt 5))) [
									guilist [
										guibutton (format "^f5%1   " (at $skinlist (+ (* $cnt 5) $cntt))) ( format "setsuperskin %1 %2" $pmidr (+ (* $cnt 5) $cntt) )
									]
								] 
							]
						]
					]
				]
					
			]		
			pmidr = ( if (= $em 1) [ (+ $pmidx 5) ] [ $pmidx ] )
			guilist [ guitext "                                                     " 0 ]
			
			]
			guilist [ guistrut 20 ]
		]
	]
	guitab "other"          ////////////////////////////
	guistayopen [
		createine fem 2
		guititle "Flags"
		guilist [
			guiradio "^f3Enemyflag              " fem 2 "fem = 2" "Modify the Enemy flag"
			guiradio "^f1Own flag               " fem 1 "fem = 1" "Modify Your flag"
			guiradio "^f4Hold (neutral)" fem 0 "fem = 0" "Modify the neutral flag for instahold/effichold/.."
		]
		guilist [
			guimodelpreview (if (= $fem 2) [result "flags/red"] [ if (= $fem 0) [result "flags/neutral"] [result "flags/blue"] ])  "flags" "" 4 1
			guilist [
				skinlist = (loopsuperskins (- 23 $fem))
							guilist [
								loop cnt (+ (div (listlen $skinlist) 5) 1) [ 
									guilist [	
										loop cntt (min 5 (- (listlen $skinlist) (* $cnt 5))) [
											guilist [
												guibutton (format "^f5%1   " (at $skinlist (+ (* $cnt 5) $cntt))) ( format "setsuperskin %1 %2" (- 23 $fem) (+ (* $cnt 5) $cntt) )
											]
										] 
									]
								]
							]
			]	
		]
		guibar
		guititle "Weapon Styles" "Different weapon packs. Visible just for you."

		guialign 0 [
			guilist [		
				guibutton "^f6N^fforma^f6l^f0.."    [hudgunsdir ""]
				guibutton "^f6C^fft^f6f^f0 Edition..      "        "hudgunsdir hudguns_ctf"		
			]
			guilist [
				guibutton "^f6C^fflassi^f6c^f0 Edition.. "    "hudgunsdir hudguns_classic"       
				guibutton "^f6S^ffolari^f6s^f0 Edition.. "    "hudgunsdir hudguns_solaris"
			]
		]
	]
]

crosshairs = ["data/crosshair.png data/hit.png" 
"packages/crosshairs/x.png packages/crosshairs/x-hit.png"
"packages/crosshairs/x_dot.png packages/crosshairs/x_dot-hit.png"
"packages/crosshairs/o.png packages/crosshairs/o-hit.png"
"packages/crosshairs/o_x.png packages/crosshairs/o_x-hit.png"
"packages/crosshairs/o_dot.png packages/crosshairs/o_dot-hit.png"
"packages/crosshairs/dot.png packages/crosshairs/dot-hit.png"
"packages/crosshairs/dot_wide.png packages/crosshairs/dot_wide-hit.png"
"packages/crosshairs/star.png packages/crosshairs/star-hit.png"
"packages/crosshairs/wide.png packages/crosshairs/wide-hit.png"
"packages/crosshairs/circle_dot.png packages/crosshairs/circle_dot_hit.png"
"packages/crosshairs/cross_normal.png packages/crosshairs/cross_normal_hit.png"
"packages/crosshairs/cross_whole.png packages/crosshairs/cross_whole_hit.png"
"packages/crosshairs/dot_normal.png packages/crosshairs/dot_normal_hit.png"
"packages/crosshairs/dot_whole.png packages/crosshairs/dot_whole_hit.png"
"packages/crosshairs/crash.png packages/crosshairs/crash_hit.png"
]

newgui crosshair [
    guitext "crosshair size"
    guislider crosshairsize
    loop row (div (+ (listlen $crosshairs) 6) 7) [
        guilist [
            loop col 7 [
                ch = (at $crosshairs (+ (* $row 7) $col))
                if (!=s $ch "") [
                    guiimage (at $ch 0) [ 
                        cleargui 1
                        loadcrosshair @(at $ch 0) 0
                        loadcrosshair @(at $ch (if (> (listlen $ch) 1) 1 0)) 2
                    ] 0.5
                ]
            ]
        ]
    ]
]

newgui master [
  guistayopen [
    if (ismaster (getclientnum)) [
        guibutton "relinquish master" "setmaster 0"
    ] [
        guibutton "claim master" "setmaster 1" "menu" "If the server allows it, you can gain higher priviledges to control the server. ^nE.g. to control a duel or clanwar"
    ]
    guilist [
        guitext "mastermode: "
        mm = (getmastermode)
        guiradio "open (0) " mm 0 "mastermode 0" "Everyone can join and vote for map/mode"
        guiradio "veto (1) " mm 1 "mastermode 1" "Everyone can join. You can change the map/mode"
        guiradio "locked (2) " mm 2 "mastermode 2" "New connected Players will be Spectator. You can change the map/mode"
        guiradio "private (3) " mm 3 "mastermode 3" "No one can connect. You can change map/mode"
    ]
    guibar
    looplist cn (listclients 0 0) [
        guilist [
            guitext (concatword (getclientname $cn) ": ") (getclienticon $cn)
            guibutton "kick " [kick @cn]
            guibutton "toggle spectator " [spectator @(= (isspectator $cn) 0) @cn]
            if (m_teammode (getmode)) [
                guibutton "switch team " [setteam @cn @(? (=s (getclientteam $cn) "good") "evil" "good")]
            ]
            if (ismaster $cn) [
                guibutton "take master" [setmaster 0 @cn]
            ] [
                guibutton "give master" [setmaster 1 @cn]
            ]
        ]
    ]
  ]
]

botmatchcount = 1
botmatchminskill = 50
botmatchmaxskill = 100
botrandomskill = 0
isbotmatch = 0

startbotmatch = [
	if ($isbotmatch) [
    if (isconnected 0 0) [
        echo "You must disconnect from the current multiplayer game before starting an offline match."
    ] [
        loop i $botmatchcount [addbot (rnd (+ $botmatchmaxskill 1) $botmatchminskill)]
    ]
	]
]
botmatch = [
	guilist [
		guitext "^f3Enemy amount:       "
		guilist [
		guislider botmatchcount 0 32
		guitext "                        " 0
		]
	]
	
	guicheckbox "Random Skill" botrandomskill 1 0 
	
	if (botrandomskill) [
		guilist [
			guitext "Minimum skill   "
			guilist [ 
				guislider botmatchminskill 50 101 [if (< $botmatchmaxskill $botmatchminskill) [botmatchmaxskill = $botmatchminskill]]
				guitext "                        " 0
			]
		]
		guilist [
			guitext "Maximum skill   "
			guilist [ 
				guislider botmatchmaxskill 50 101 [if (> $botmatchminskill $botmatchmaxskill) [botmatchminskill = $botmatchmaxskill]]
				guitext "                        " 0
			]
		]
	] [
		guilist [
			guitext "Skill         " 
			guilist [
				guislider botmatchminskill 50 101 [ botmatchmaxskill = $botmatchminskill]
				guitext "                        " 0
			]
		]
	]
]


newgui offline [
		guilist [
			guilist [
				guibutton "ffa"                "mode 0; guionclear [startbotmatch]; showgui maps"
				guibutton "^f6Editing"          "mode 1; guionclear [startbotmatch]; showcustommaps"
				guistrut 1
				guibutton "^f3instagib"           "mode 3;guionclear [startbotmatch]; showgui duelmaps"
				guistrut 1
				guibutton "^f0efficiency"         "mode 5;guionclear [startbotmatch]; showgui duelmaps"
				guistrut 1
				guibutton "capture"            "mode 9;guionclear [startbotmatch]; showgui capturemaps"
				guibutton "regen capture"      "mode 10;guionclear [startbotmatch]; showgui capturemaps"
			]
			guitext "    " 0
			guilist [
				guibutton "insta hold"         "mode 16;guionclear [startbotmatch]; showgui capturemaps"
				guibutton "efficiency protect" "mode 18;guionclear [startbotmatch]; showgui ctfmaps"
					guistrut 1
				guibutton "^f3insta ctf"          "mode 12;guionclear [startbotmatch]; showgui cwmaps"
					guistrut 1
				guibutton "^f0efficiency ctf"     "mode 17;guionclear [startbotmatch]; showgui cwmaps"
					guistrut 1
				guibutton "insta collect"      "mode 21;guionclear [startbotmatch]; showgui ctfmaps"
				guibutton "efficiency collect" "mode 22;guionclear [startbotmatch]; showgui ctfmaps"
			]
		]
	guibar 
	guicheckbox "Bot match:" isbotmatch 
	if ($isbotmatch) [ botmatch ]
	
	guitab "Campaigns" //////////
		guibutton "start Private Stan Sauer"           "showgui privatestansauer"
		guibutton "start An Army Of One"               "showgui armyofone"
		guibutton "start Lost"                         "sp lost" "cube"
		guibutton "start Level 9"                      "sp level9" "cube"
		guibar
		guibutton "start DMSP map.."                   "mode -2; showgui maps" "menu" "Monsters will spawn all over the place trying to kill you!"
		guicheckbox "slow motion"                      "slowmosp"
		guitext   "skill (default: 3)"
		guislider skill
	
	guitab "Other Modes" ///////////
	guilist [
		guilist [
			guibutton "teamplay"           "mode 2;guionclear [startbotmatch]; showgui maps"
			guistrut 2
			guibutton "instagib team"      "mode 4;guionclear [startbotmatch]; showgui maps"
			guibutton "efficiency team"    "mode 6;guionclear [startbotmatch]; showgui maps"
			guistrut 1
			guibutton "tactics"            "mode 7;guionclear [startbotmatch]; showgui maps"
            guibutton "tactics team"       "mode 8;guionclear [startbotmatch]; showgui maps"
		]
		guilist [
            guibutton "efficiency hold"    "mode 19;guionclear [startbotmatch]; showgui capturemaps"
			guibutton "ctf"                "mode 11;guionclear [startbotmatch]; showgui ctfmaps"
            guistrut 1
			guibutton "insta protect"      "mode 14;guionclear [startbotmatch]; showgui ctfmaps"
			guibutton "protect"            "mode 13;guionclear [startbotmatch]; showgui ctfmaps"
			guistrut 1
			guibutton "hold"               "mode 15;guionclear [startbotmatch]; showgui capturemaps"
			guibutton "collect"            "mode 20;guionclear [startbotmatch]; showgui ctfmaps"
		]
	]
	guibar 
	guicheckbox "Bot match:" isbotmatch 
	if ($isbotmatch) [ botmatch ]
	
] "Offline Match"

newgui armyofone [
    guilist [
        guilist [
            guibutton "Part I" "sp mpsp6a" "cube"
            guibutton "Part II" "sp mpsp6b" "cube"
            guibutton "Part III" "sp mpsp6c" "cube"
        ]
        showmapshot (substr $guirolloveraction 3)
    ]
] "An Army Of One"

newgui privatestansauer [
    guilist [
        guilist [
            guibutton "Run N' Gun Part I" "sp mpsp9a" "cube"
            guibutton "Run N' Gun Part II" "sp mpsp9b" "cube"
            guibutton "Run N' Gun Part III" "sp mpsp9c" "cube"
            guibutton "THE SERIOUSLY BIG VALLEY" "sp mpsp10" "cube"
        ]
        showmapshot (substr $guirolloveraction 3)
    ]
] "Private Stan Sauer"
/////////////////////SERVERBROWSER////////
createine othermaster 0
if ($othermaster) [
mastername osh-clan.de
masterport 24000
]

playerserverbrowser = [0]

favservlist = ""
selectedg = 0
selecteds = 0
fsname = ""
fgname = ""
fsaddr = ""
fsport = ""
newclantag = ""
savefav = [
		favservlist = ""
		loop group (numfavgroups) [
				if (&& (= $group $selectedg) (= $selecteds -1)) [ 
					append favservlist (format "favgroup [%1]^n" $fgname);
				] [
					append favservlist (format "favgroup ^"%1^"^n" (getfavgroupname $group));
				]
				loop server (numfavserver $group) [
					if (&& (= $group $selectedg) (= $server $selecteds)) [ 
					append favservlist (format "favserv [%1] %2 %3^n" $fsname $fsaddr $fsport);
					] [
					append favservlist (format "favserv [%1] %2 %3^n" (getfavservername $group $server) (getfavserveraddress $group $server) (getfavserverport $group $server)); 
					]
				]
				if (&& (= $group $selectedg) (>=  $selecteds (numfavserver $group))) [ 
					append favservlist (format "favserv [%1] %2 %3^n" $fsname $fsaddr $fsport);
				]
		]
		if (>= $selectedg (numfavgroups)) [
			append favservlist (format "favgroup [%1]^n" $fgname);
		]
		clearfavs;
		favservlist;
		saveserverbrowsercfg;
]

newgui serveredit [
	guistayopen [
	guistrut 1
	guicheckbox "search LAN" searchlan
	guicheckbox "auto-update" autoupdateservers
	guicheckbox "auto-sort" autosortservers
	guibar
	createine othermaster 0
	guicheckbox "alternative masterserver" othermaster 1 0 [
				if ($othermaster) [
				mastername osh-clan.de
				masterport 24000
				] [
				mastername master.sauerbraten.org
				masterport 28787
				]
	] "when sauerbraten.org is down again use this one. ^nOtherwise disable this."
	guistrut 1
	guicheckbox "Server Preview" su_serverbrowser
	guicheckbox "Favorite Server on top" su_serverbrowserfavs
	guistrut 1
	guititle "Server Preview"
	guistrut 1
		guialign 0 [
			guitext "Modules:   "
			guilist [		
			guicheckbox "^f6clientnum   " su_sbclientnum
			guicheckbox "^f6show ping" su_sbping
			]
			guilist [
			guicheckbox "^f6show flags   " su_sbflags
			guicheckbox "^f6show frags" su_sbfrags
			]
			guilist [
			guicheckbox "^f6show accuracy   " su_sbaccuracy
			guicheckbox "^f6show deaths" su_sbdeaths
			
			]
			guilist [
				guicheckbox "^f6show teamkills" su_sbteamkills
			]
		]
		guistrut 1
		if ($su_serverbrowserfavs) [ 
		guitab "Favorite Servers" 
		guilist [
		
			loop group (numfavgroups) [
				guilist [
					guibutton (format "^f5%1" (getfavgroupname $group) ) [ 
					selectedg = @group; selecteds = -1;
					fgname = (getfavgroupname $selectedg) ] 0
					loop server (numfavserver $group) [
						guibutton (getfavservername $group $server) [ 
							selecteds = @server; selectedg = @group; 
						fsaddr = (getfavserveraddress $selectedg $selecteds);
						fsport = (getfavserverport $selectedg $selecteds);
						fsname = (getfavservername $selectedg $selecteds);
						] 0
					]
					guibutton "^f0+ Add Server" [ selectedg = @group; selecteds = (numfavserver $group); fsaddr = "address"; fsport = "28785"; fsname = "new server"; savefav;] 0
				] 
				guitext "   " 0
				guibar
				guitext "   " 0
				if (= $group (- (numfavgroups) 1)) [ guibutton "^f0+ Add Group" [ 
					selectedg = (numfavgroups); selecteds = -1;
					fgname = "new group";
					savefav;
					] 0; guitext "  " 0]
			]
	
		]
		guibar
		guilist [
			if (= $selecteds -1) [
				guilist [ 
				guitext "^f5Group Name: " 0
				guistrut 2
				]
				guilist [
					guifield fgname 20
				]
				guitext "   " 0
				guibutton "^f1Change/Save " [ savefav ]
				guibutton "^f3Remove" [ fgname = ""; savefav ] "exit"
			] [
				guilist [			
					guitext "^f1Name: " 0
					guitext "^f1Address: " 0
					guitext "^f1Port: " 0
				]	
				guilist [
					guifield fsname 20
					guifield fsaddr 20 
					guifield fsport 6 
				]
				guitext "   " 0
				guibutton "^f1Change/Save " [ savefav ]
				guibutton "^f3Remove" [ fsname = ""; fsaddr = ""; fsport = ""; savefav ] "exit"
			] 
		]
		]
		guitab "Recognized Clantags"
		guitext "^f9Clans with these clantags will get recognized for various features. "
		guitext "^f9E.g. the ^"clans^"-search in the serverbrowser, autoclanwar-detection ..." 0
		guistrut 1
		guilist [
		loop cnt (+ (div (numclans) 8) 1) [ 
			guilist [	
				loop cntt (min 8 (- (numclans) (* $cnt 8))) [
					guilist [
					guitext (getclantag @(+ (* $cnt 8) $cntt)) 0
					//guibutton " ^f3-" [ 
						//	clanliste = ""
						//	loop cnc (numclans) [ if (= $cnc (+ (* $cnt 8) $cntt)) [ append clanliste (getclantag @cnc) ] ] //todo..
						//	looplist clan $clanliste [
						//		addclan $clan
						//	]
						//	saveserverbrowsercfg
						//] 0
					]
				]
				guitext "          " 0
			]
		]		
	]
	guilist [
		guifield newclantag 15
		guibutton "^f0Add Clantag" [ addclan $newclantag ; saveserverbrowsercfg ]
	]
	]
] "Serverbrowser Options"

newgui servers [
    guistayopen [ 
	guilist [
                guibutton "Refresh" "updatefrommaster; exec data/supermenus.cfg" update
                guitext "                       " 0
				guibutton "Serverbrowser Settings" "showgui serveredit" options
                if (= $autosortservers 0) [
                    
                    guibutton "sort" "sortservers"
                ]
			guitext "                       " 0
			guitext (concat (su_getplayers) " players online") 0
			
            ]

	guilist [
			guialign 0 [
				guifield filter 70 []
			]
			
			
				if (= (strcmp $filter "") 0) [
				guilist [
					guibutton "Playerview" [ playerserverbrowser = 1 ] "user"
					guibutton "Serverview" [ playerserverbrowser = 0 ] "server"
				]
				]	[ 
				guitext "   " 0
				guibutton "clans" [ filter "clans" ; playerserverbrowser = 1 ] "arrow_fw" ] 
			]
		
		guibar
if (> (strcmp $filter "") 0) [ playerserverbrowser = 0; ]
	if $playerserverbrowser [
	guiplayers [ ] ] [ guiservers [ ] ]
            
        
	] 
] "" [initservers]

newgui gamemode [
    guilist [
        guilist [
            guibutton "ffa"                "mode 0; showgui maps"
            guibutton "^f6Editing"          "mode 1; showcustommaps"
            guibar
            guibutton "^f3instagib"           "mode 3; showgui duelmaps"
            guibar
            guibutton "^f0efficiency"         "mode 5; showgui duelmaps"
            guibar
            guibutton "capture"            "mode 9; showgui capturemaps"
            guibutton "regen capture"      "mode 10; showgui capturemaps"
        ]
        guibar
        guilist [
            guibutton "insta hold"         "mode 16; showgui capturemaps"
            guibutton "efficiency protect" "mode 18; showgui ctfmaps"
				guibar
            guibutton "^f3insta ctf"          "mode 12; showgui cwmaps"
				guibar
            guibutton "^f0efficiency ctf"     "mode 17; showgui cwmaps"
				guibar
            guibutton "insta collect"      "mode 21; showgui ctfmaps"
            guibutton "efficiency collect" "mode 22; showgui ctfmaps"
        ]
    ]
	guitab 
	guilist [
		guilist [
			guibutton "teamplay"           "mode 2; showgui maps"
			guibutton "instagib team"      "mode 4; showgui maps"
			guibutton "efficiency team"    "mode 6; showgui maps"
			guibutton "tactics"            "mode 7; showgui maps"
            guibutton "tactics team"       "mode 8; showgui maps"
		]
		guilist [
            guibutton "efficiency hold"    "mode 19; showgui capturemaps"
			guibutton "ctf"                "mode 11; showgui ctfmaps"
            guibutton "insta protect"      "mode 14; showgui ctfmaps"
			guibutton "protect"            "mode 13; showgui ctfmaps"
			guibutton "hold"               "mode 15; showgui capturemaps"
			guibutton "collect"            "mode 20; showgui ctfmaps"
		]
	]
]

showfileeditor = [
    guinoautotab [
        guieditor $arg1 $arg2 $arg3
        textinit $arg1 $arg1
        guistayopen [
            guilist [
                guibutton "load" [textfocus @arg1; textload @arg1]
                guibar
                guibutton "save" [textfocus @arg1; textsave @arg1]
                guibar
                guibutton "exec" [textfocus @arg1; textexec]
                guibar
                guibutton "copy" [textfocus @arg1; textcopy]
                guibar
                guibutton "paste" [textfocus @arg1; textpaste]
                guibar
                guibutton "select" [textfocus @arg1; textselectall]
                guibar
                guibutton "clear" [textfocus @arg1; textclear]
            ]
        ]
    ]
]

notepadfile = "untitled.txt"

newgui notepad [
    guifield notepadfile -30
    showfileeditor $notepadfile -80 20
]

notepad = [
    if (> $numargs 0) [notepadfile = $arg1]
    showgui notepad
]

newgui pastebuffer [
    guinoautotab [
        guieditor "#pastebuffer" -80 20
        guistayopen [
            guilist [
                guibutton "exec" [textfocus "#pastebuffer"; textexec]
                guibar
                guibutton "clear" [textfocus "#pastebuffer"; textclear]
            ]
        ]
    ]
]

pastebuffer = [showgui pastebuffer]

newgui scratchpad [
    guinoautotab [
        guieditor "#scratchpad" -80 20
        guistayopen [
            guilist [
                guibutton "exec" [textfocus "#scratchpad"; textexec]
                guibar
                guibutton "copy" [textfocus "#scratchpad"; textcopy]
                guibar
                guibutton "paste" [textfocus "#scratchpad"; textpaste]
                guibar
                guibutton "select" [textfocus "#scratchpad"; textselectall]
                guibar
                guibutton "clear" [textfocus "#scratchpad"; textclear]
            ]
        ]
    ]
]

scratchpad = [showgui scratchpad]

newmapsize = 12
savemap_name = temp

newgui editing [
    guibutton "materials.."                           "showgui materials"
    guibutton "toggle edit mode	(E)"              "edittoggle"
    guitext "toggle heightmap	(H)"
    guibutton "deselect			(SPACE)"                "cancelsel"
    guibutton "passthrough		(hold LCTRL)"               "passthrough"
    guitext "select			drag left mouse   "
    guitext "select corners		drag middle mouse "
    guitext "extend selection	right mouse"
    guitext "reorient			right mouse"
    guitext "move selection		drag right mouse"
    guibutton "copy				(C)"			                  "copy"
    guibutton "paste			(V)"			                "paste"

    guitab ents
    guilist [
      guilist [
        guibutton "drop entities.."              "showgui dropent"
        guibutton "mapmodels.."                  "showgui mapmodels"
        guibutton "light.."                      "resetlight;showgui newlight"

        guibutton "newent playerstart   "
        guibutton "newent shells"
        guibutton "newent bullets"
        guibutton "newent rockets"
        guibutton "newent riflerounds"
        guibutton "newent grenades"
      ]
      guilist [
        guibutton "teleport.."                   "showgui newteleport"
        guibutton "monster.."                    "showgui monsters"
        guibutton "trigger.."                    "showgui triggers"

        guibutton "newent cartridges"
        guibutton "newent health"
        guibutton "newent healthboost"
        guibutton "newent greenarmour"
        guibutton "newent yellowarmour"
        guibutton "newent quaddamage"
      ]
    ]

    guitab keys
    guibutton "flip / mirror cube		(X)"            "flip"
    guibutton "undo					(Z, U)"                     "undo"
    guibutton "redo					(I)"                        "redo"
    guibutton "delete				(BACKSPACE)"                  "editdel"
    guibutton "texture palette     	(F2)" "showtexgui"
    guibutton "edit entity gui			(F3)" "showentgui"
    guibutton "mapmodels list			(F4)" "showgui mapmodels"
    guibutton "select all in box		(keypad ENTER)" "entselect insel"
    guibutton "select all matching		(N)" "selentfindall"
    guibutton "center view on ent		(COMMA + scroll)" "entautoview"
    guibutton "edit entity console		(PERIOD)" "selentedit"
    guitext "toggle heightmap tex	(MMB in heightmapmode)"
    guicheckbox "toggle outline			(7)"        outline
    guicheckbox "toggle wireframe		(8)"    wireframe


    guitab scroll
    guitext "push/pull selection			scroll wheel only"
    guitext "push the face of a cube	hold F + scroll wheel"
    guitext "change gridsize			hold G + scroll wheel"
    guitext "change textures			hold Y + scroll wheel"
    guitext "rotate         			hold R + scroll wheel"
    guitext "push corner with cursor		hold Q + scroll wheel"
    guitext "push/pull heightmap			hold LALT + scroll wheel"
    guitext "change heightmap brush		hold B + scroll wheel"

    guitab lighting
    guibutton "calclight 1 (slow: 8xAA)" "calclight 1"
    guibutton "calclight -1 (quick: no AA, no model shadows)"   "calclight -1"
    guibutton "patchlight"                         "patchlight"

    guicheckbox "fullbright" fullbright

    guitext "lightprecision (default: 32)"
    guilistslider lightprecision "8 16 32 48 64 128 256"

    guitext "lighterror (default: 8)"
    guislider lighterror

    guitext "lightthreads (CPU threads/cores) (default: 0)"
    guislider lightthreads

    //guibutton "lightlod high (6)" "lightlod 6"
    //guibutton "lightlod low  (2)" "lightlod 2"
    //guibutton "lightlod off  (0)" "lightlod 0"


    guitab blend
    guitext "blend paint mode:"
	guiradio "off						(keypad 0)" blendpaintmode 0
	guiradio "replace					(keypad 1)" blendpaintmode 1
	guiradio "dig						(keypad 2)" blendpaintmode 2
	guiradio "fill						(keypad 3)" blendpaintmode 3
	guiradio "inverted dig				(keypad 4)" blendpaintmode 4
	guiradio "inverted fill				(keypad 5)" blendpaintmode 5
    guibar
    guitext "paint blendmap			(MOUSE1)"
	guibutton "change blend brush			scroll wheel" "nextblendbrush"
	guibutton "rotate blend brush			(MOUSE2)" "rotateblendbrush"
	guibutton "clear entire blendmap 		(^"clearblendmap^" command)" "clearblendmap"
	guibutton "clear blendmap in selection	(^"clearblendmapsel^" command)" "clearblendmapsel"

    guitab map
    guitext   "save map:"
    guifield  savemap_name 20 [ savemap $savemap_name ]
    guibutton [load @savemap_name map]             "map $savemap_name"
    guibutton "newmap (default size: 12)"          "newmap $newmapsize"
    guislider "newmapsize" 10 16
    guibutton "increase mapsize (2x)"              "mapenlarge"
    guitext   "max undo size (default: 5 MB)"
    guislider "undomegs" 1 10
    guibutton "optimize geometry"                  "remip"
    guibutton "set map title/author"               "saycommand [/maptitle ]"
    guibutton "show custom maps"                   "showcustommaps"

    guitab skybox
    guilist [
        guistayopen [
            guilist [ genskyitems $skies1 ]
            guilist [ genskyitems $skies2 ]
            showskyshot
        ]
    ]

    guitab cfg
    guitext (mapcfgname)
    showfileeditor (mapcfgname) -60 15
]


skies1 = [
aftas/sky/orbe
blindabuser/blindasky
blindabuser/blindasky2
darc/forge
dash/moon
hazel/green
humus/meadow
ik2k/env/iklake
jon/prarie
mayhem/duomo
mayhem/eclipse
meister/uzze
penguins/arid
penguins/harmony
penguins/wrath
penguins/yonder
ratboy/skyboxes/coward
]
skies2 = [
shmutzwurst/london
skyboxes/clearsky052
skyboxes/darkness
skyboxes/evilsky
skyboxes/morning
skyboxes/remus/sky01
skyboxes/turbulent
socksky/barren
socksky/desert
socksky/emerald
socksky/frozen
socksky/frozendusk
socksky/grave
socksky/mars
socksky/nightball
socksky/valley
staffy/staffy
]

genskyitems = [
    looplist cursky $arg1 [
        guibutton $cursky (concat skybox $cursky) //"cube"
    ]
]

alias showskyshot [ guibar; guiimage (concatword "<thumbnail:128>packages/" (if (> $numargs 0) [result $arg1] [result (at $guirollovername 0)]) "_ft.jpg") $guirolloveraction 4 1 "data/cube.png"]


newgui materials [
    guibutton "air"                        "editmat air"
    guibutton "water"                      "editmat water"
    guibutton "lava"                       "editmat lava"
    guibutton "clip"                       "editmat clip"
    guibutton "glass"                      "editmat glass"
    guibutton "noclip"                     "editmat noclip"
    guibutton "gameclip"                   "editmat gameclip"
    guibutton "death"                      "editmat death"
    guibutton "alpha"                      "editmat alpha"

    guicheckbox "show material volumes"    showmat

    //guibutton "waterlod very high		(3)"  "waterlod 3"
    //guibutton "waterlod high		(2)"          "waterlod 2"
    //guibutton "waterlod default		(1)"  "waterlod 1"
    //guibutton "waterlod low		(0)"          "waterlod 0"

    //guibutton "watersubdiv very fine	(0)"          "watersubdiv 0"
    //guibutton "watersubdiv fine		(1)"  "watersubdiv 1"
    //guibutton "watersubdiv default		(2)"  "watersubdiv 2"
    //guibutton "watersubdiv coarse		(3)"  "watersubdiv 3"

    //guibutton "water waves on"                     "waterwaves 1"
    //guibutton "water waves off"                    "waterwaves 0"
]

setting_entediting = 1

newgui dropent [
    guitext "drop entities:"
    guiradio "to the floor"                 entdrop 1
    guiradio "on selection"                 entdrop 2
    guiradio "to the floor at selection"    entdrop 3
    guiradio "at current position"          entdrop 0
    guibar
    guicheckbox "entity snap-to-grid"       entselsnap
    guicheckbox "entity selection"          setting_entediting 1 0 [ entediting $setting_entediting ]
]

newgui triggers [
    guibutton [invisible]               [BTmm = -1; showgui trigger2]
    guibutton [a carrot]                [BTmm = 23; showgui trigger2]
    guibutton [switch #1]               [BTmm = 24; showgui trigger2]
    guibutton [switch #2]               [BTmm = 25; showgui trigger2]
    guibutton [door #1]                 [BTmm = 26; showgui trigger2]
    guibutton [door #2]                 [BTmm = 27; showgui trigger2]
    guibutton [door #3]                 [BTmm = 28; showgui trigger2]
]

newgui trigger2 [
    guibutton [animation loop]                      [BTtt = 0; showgui trigger3]
    guibutton [trigger once (popback)]              [BTtt = 1; showgui trigger3]
    guibutton [trigger once (popback & rumble)]     [BTtt = 2; showgui trigger3]
    guibutton [trigger once]                            [BTtt = 3; showgui trigger3]
    guibutton [trigger once (rumble)]               [BTtt = 4; showgui trigger3]
    guibutton [trigger multiple (popback)]          [BTtt = 5; showgui trigger3]
    guibutton [trigger multiple (popback & rumble)] [BTtt = 6; showgui trigger3]
    guibutton [trigger multiple]                        [BTtt = 7; showgui trigger3]
    guibutton [trigger multiple (rumble)]           [BTtt = 8; showgui trigger3]
    guibutton [door (open once)]                        [BTtt = 9; showgui trigger3]
    guibutton [door (auto close)]                   [BTtt = 10; showgui trigger3]
    guibutton [door (locked)]                       [BTtt = 11; showgui trigger3]
    guibutton [vanishing trigger]                   [BTtt = 12; showgui trigger3]
    guibutton [vanishing trigger (rumble)]          [BTtt = 13; showgui trigger3]
    guibutton [End Of Level Trigger]                    [BTtt = 29; showgui trigger3]
]

build_trigger = [newent mapmodel $BTmm $BTtt $BTti]

newgui trigger3 [
    loop i 9 [
        tjt = (concat tag (concatword # $i))
        tjc = (concat BTti "=" $i ";" "build_trigger")
        guibutton $tjt $tjc
    ]
]


resetlight = [
    lightcolour = 0
    lightbright = 1
    lightset 255 255 255
    lightradius = 128
]

lightset = [
    lightr = $arg1
    lightg = $arg2
    lightb = $arg3
    if (= $lightbright 0) lightscale
]

lightscale = [
    if (= $lightbright 0) [
        lightr = (div $lightr 2); lightg = (div $lightg 2); lightb = (div $lightb 2)
    ] [
        lightr = (min 255 (* $lightr 2)); lightg = (min 255 (* $lightg 2)); lightb = (min 255 (* $lightb 2))
    ]
]

lightcmd = [
    result (concat newent light $lightradius $lightr $lightg $lightb)
]

newgui newlight [
    guibutton "sunlight"    "newent light 0 255 255 255"
    guibutton (lightcmd)
    guibar
    guitext "color:"
    guicolor (+ (* (+ (* $lightr 256) $lightg) 256) $lightb)
    guislider lightr 0 255
    guislider lightg 0 255
    guislider lightb 0 255
    guilist [
        guicheckbox "bright"    lightbright 1 0 [lightscale]
        guibar
        guiradio "white"        lightcolour 0 [lightset 255 255 255]
        guiradio "blue"         lightcolour 1 [lightset 192 192 255]
        guiradio "red"          lightcolour 2 [lightset 255 192 192]
        guiradio "green"        lightcolour 3 [lightset 192 255 192]
        guiradio "yellow"       lightcolour 4 [lightset 255 255 192]
        guiradio "purple"       lightcolour 5 [lightset 255 192 255]
        guiradio "turquoise"    lightcolour 6 [lightset 192 255 255]
    ]
    guitext "radius:"
    guislider lightradius 0 512
]

newgui newteleport [
    guibutton "newent teleport 1"
    guibutton "newent teledest 1"
    guibutton "newent teleport 2"
    guibutton "newent teledest 2"
    guibutton "newent teleport 3"
    guibutton "newent teledest 3"
    guibutton "newent teleport 4"
    guibutton "newent teledest 4"
]

newgui mapmodels [
    loop i (div (+ (nummapmodels) (- 17 1)) 17) [
        if (> $i 0) [
            guitab (+ $i 1)
        ]
        guilist [
            guilist [
                loop j (min (- (nummapmodels) (* $i 17)) 17) [
                    mmidx = (+ (* $i 17) $j)
                    mmname = (mapmodelname $mmidx) 
                    if (= (strstr $mmname "mapmodels") 0) [
                        mmname = (substr $mmname 10)
                    ]
                    guibutton $mmname [newent mapmodel @mmidx]
                ]
            ]
            guispring
            guibar
            guimodelpreview (mapmodelname (at $guirolloveraction 2)) "mapmodel" $guirolloveraction 4 1
        ]
    ]
]

newgui monsters [
    guibutton "ogro / fireball"      "newent monster 0"
    guibutton "rhino / chaingun"      "newent monster 1"
    guibutton "ratamahatta / shotgun"      "newent monster 2"
    guibutton "slith / rifle" "newent monster 3"
    guibutton "bauul / RL"     "newent monster 4"
    guibutton "hellpig / bite"       "newent monster 5"
    guibutton "knight / iceball" "newent monster 6"
    guibutton "goblin / slimeball"   "newent monster 7"
    guibutton "spider / grenade"    "newent monster 8"
]

newgui postfx [
    guibutton "(effect OFF)"          "clearpostfx"
    guibutton "bloom (subtle: 30%)"    "bloom 0.3"
    guibutton "bloom (bright: 55%)"    "bloom 0.55"
    guibutton "bloom (intense: 80%)"  "bloom 0.8"
    guibutton "rotoscope" "rotoscope 1"
    guibutton "rotoscope + blur3" "rotoscope 1 1"
    guibutton "rotoscope + blur5" "rotoscope 1 2"
    guibutton "sobel"  "setpostfx sobel"
    guibutton "invert" "setpostfx invert"
    guibutton "gbr"    "setpostfx gbr"
    guibutton "bw"     "setpostfx bw"
    guibutton "blur3"  "setpostfx hblur3; addpostfx vblur3"
    guibutton "blur5"  "setpostfx hblur5; addpostfx vblur5"
]

macro resbutton [
    guibutton "%1x%2" "screenres %1 %2" (if (&& (= $scr_w %1) (= $scr_h %2)) [result "radio_on"] [result "radio_off"])
]

bindactions = [forward backward left right jump attack togglezoom saycommand sayteamcommand showscores toggleconsole screenshot edittoggle "setweapon FI" "setweapon SG" "setweapon CG" "setweapon RL" "setweapon RI" "setweapon GL" "setweapon PI" "weapon" "universaldelta 1" "universaldelta -1" dropflag addbot delbot]

entupdate = [ entset $entguitype $entguiattr0 $entguiattr1 $entguiattr2 $entguiattr3 $entguiattr4 ]

initentgui = [
  entguitype = (enttype)
  @(loopconcat i 5 [result [
    entguiattr@i = (entattr @i)
  ]])
]

genentattributes = [
    entattributes = (loopconcat i (listlen $arg2) [
        entattribname = (at $arg2 $i)
        entattriblimits = (at $arg3 (* 2 $i))
        entattriblimits2 = (at $arg3 (+ 1 (* 2 $i)))
        if (=s (at $entattriblimits 0) $entattriblimits) [
            result [
                guitext @entattribname
                guislider entguiattr@i @entattriblimits @entattriblimits2 entupdate
            ]
        ] [
            result [
                guitext @entattribname
                guinameslider entguiattr@i [@@entattriblimits] [@@entattriblimits2] entupdate
            ]
        ]
    ])
]

guilistsplit = [
  guilist [
    i = 0
    l = (listlen $arg3)
    z = (div (+ $l (- $arg2 1)) $arg2)
    loop a $arg2 [
      guilist [
        t = (min (+ $i $z) $l)
        while [< $i $t] [
          $arg1 = (at $arg3 $i)
          arg4
          i = (+ $i 1)
        ]
      ]
      if (&& (>= $numargs 5) (< (+ $a 1) $arg2)) [arg5]
    ]
  ]
]

quickeditmenu = [
  guitext "Quick Commands:"
  guibar
  guifield  savemap_name 10 [ savemap $savemap_name ]
  guibutton "quick light"       "calclight -1"
  guibutton "optimize map"      "remip"
  guibutton "new entity"        "newent shells"
  guibar
  guibutton newmap
  guibar
  guibutton help "showgui editing"
]

matmenu = [
    guibutton "air"                        "editmat air"
    guibutton "water"                      "editmat water"
    guibutton "lava"                       "editmat lava"
    guibutton "clip"                       "editmat clip"
    guibutton "glass"                      "editmat glass"
    guibutton "noclip"                     "editmat noclip"
    guibutton "gameclip"                   "editmat gameclip"
    guibutton "death"                      "editmat death"
    guibutton "alpha"                      "editmat alpha"
    guicheckbox "show material volumes"    showmat
]

brushmenu = [
  guilist [ // diamonds
  guiimage "packages/icons/brush_1c.png" brush_0
  guiimage "packages/icons/brush_21c.png" brush_1
  guiimage "packages/icons/brush_421c.png" brush_2
  ]
  guilist [ // squares
  guiimage "packages/icons/brush_3s.png" brush_3
  guiimage "packages/icons/brush_5s.png" brush_4
  guiimage "packages/icons/brush_7s.png" brush_5
  ]
  guititle smooth
  guilist [ // smooth
  guiimage "packages/icons/brush_3s.png" brush_6
  guiimage "packages/icons/brush_5s.png" brush_7
  guiimage "packages/icons/brush_7s.png" brush_8
  ]
]

newentgui = [
  genentattributes $arg1 $arg2 $arg3
  newgui $arg1 [
    guitext $entguitype
    guibar
    @entattributes
    guitab type
    guilistsplit n 2 $enttypelist [
        guibutton $n [ entset @n ]
    ]
    guitab misc
    @quickeditmenu
  ] "" [initentgui]
]

looplist i $enttypelist [
  newentgui $i "" ""
]

newgui materials [
  @matmenu
  guitab misc
  @quickeditmenu
]

newgui brushes [
  @brushmenu
  guitab misc
  @quickeditmenu
]

newgui quickedit [
  @quickeditmenu
  guitab materials
  @matmenu
]

newentgui light "radius red green blue" "0 400 0 255 0 255 0 255"
newentgui spotlight "radius" "0 200"
newentgui playerstart "direction" "0 360"
newentgui teleport "tag" "0 20"
newentgui teledest "direction tag" "0 360 0 20"
newentgui monster "direction type" "0 360 0 7"
newentgui mapmodel "direction model" "0 360 0 100"
newentgui envmap "radius" "0 400"
newentgui jumppad "Z Y X" "0 200 0 200 0 200"
newentgui sound "type radius size" "0 20 0 500 0 500"
newentgui particles "type" "0 3"

contexteditgui = [
    if $hmapedit [showgui brushes] [
        if (enthavesel) [
            showgui (enttype)
        ] [showgui (? (havesel) materials quickedit)]
    ]
]

showentgui = [ contexteditgui ] // legacy bind

newgui seltexinfo [
    guitext (concatword "Slot: " (getseltex))
    guilist [ loop x 5 [
        texname = (gettexname (getseltex) $x)
        texname = (substr $texname (+ (strstr $texname ">") 1)) // chop off any leading commands
        guiimage (concatword "packages/" $texname) "" 1 1
    ]]
    loop x 5 [ tex = (gettexname (getseltex) $x); if (strcmp $tex "") [] [guitext $tex]]
]

newgui options [
	guilist [
		guilist [
			guitext "general" 0
			guistrut 5.5
			guitext "models" 0
			guistrut 5.5
			guitext "minimap" 0
		]
		guistrut 2
		guilist [
			guistayopen [
				guilist [
					guilist [
						guicheckbox "show FPS" showfps
						guicheckbox "2D menus" gui2d
						guicheckbox "hit sound" hitsound
						guicheckbox "blood"             blood
						guicheckbox "damage screen"     damagescreen
						guicheckbox "damage compass"    damagecompass
					]
					guistrut 2
					guilist [
						guicheckbox "show scoreboard at death" deathscore
						guicheckbox "outline capture meters" outlinemeters
						guilist [
							guicheckbox "crosshair color effects" crosshairfx
							if $crosshairfx [
								guibar
								guicheckbox "teammates" teamcrosshair
								guistrut 1
								guicheckbox "hits" hitcrosshair 425
							]
						]
						guilist [
							guicheckbox "hudguns"       hudgun
							if $hudgun [
								guibar
								guicheckbox "sway"		hudgunsway
								guistrut 1
								guicheckbox "muzzle flash" muzzleflash
								guistrut 1
								guicheckbox "muzzle light" muzzlelight
							]
						]
						guilist [
							guicheckbox "wall clock" wallclock
							if $wallclock [
								guibar
								guicheckbox "24 hour" wallclock24
								guistrut 1
								guicheckbox "seconds" wallclocksecs
							]
						]
					]
				]
			]

			guistrut .5

			guilist [
				guicheckbox "ragdoll deaths"    ragdoll
				if $ragdoll [
					guibar
					guicheckbox "keep after respawn" ragdollmillis 10000
				]
			]
			if $ragdoll [
				guitext "ragdoll velocity multiplier" 0
				guislider deadpush
			]
			guicheckbox "hide dead players" hidedead
			guilist [
				guicheckbox "fullbright player models" fullbrightmodels 60 0
				if $fullbrightmodels [
					guibar
					guiradio "subtle" fullbrightmodels 60
					guistrut 1
					guiradio "bright" fullbrightmodels 100
					guistrut 1
					guiradio "overbright" fullbrightmodels 150
					guistrut 1
					guiradio "max" fullbrightmodels 200
				]
			]
			guilist [
				guicheckbox "force matching player models" forceplayermodels
				guistrut 1
				guicheckbox "always use team skins" teamskins
			]

			if $ragdoll [] [
				guistrut 2
			]

			guistrut .5

			guicheckbox "numbered capture bases" basenumbers
			guicheckbox "show teammates" radarteammates 1
		]
	]

	guibar
	guibutton "restore defaults (clears ALL settings)" "exec restore.cfg"

	guitab    "gfx"
	guitext "performance key: ^f0fast^f~, ^f2moderate^f~, ^f3slow and pretty^f~" 0
	guibar

	guistayopen [
		guilist [
			guilist [
				if (&& (< $shaders 0) (= $renderpath 0)) [
					guicheckbox "^f2shaders"			shaders 1 -1
				] [
					guicheckbox "^f2shaders	"           shaders
				]

				guitext "water"
				if (> $renderpath 0) [
					guitext "waterfalls"
				]

				if (= $renderpath 0) [
					guicheckbox "^f3shadow maps"  shadowmap
					if (>= $maxtmus 3) [
						guicheckbox "^f2dynamic lights"    ffdynlights 5 0
					]
				] [
					guicheckbox "^f3soft shadows"  shadowmap
					guicheckbox "^f3glare"       glare
				]

				if $usetexrect [
					guicheckbox "^f3motion blur" motionblur
				]

				guicheckbox "^f3grass" grass

				if (> $renderpath 0) [
					guicheckbox "^f0dynamic lights"    maxdynlights 3 0
					guicheckbox "^f0soft particles" depthfx
				]

				guicheckbox "^f0glass reflection"  glassenv
				guicheckbox "^f0decals" decals
				guicheckbox "^f0fix t-joints" filltjoints
				guitext "textures"
				guitext "texreduce"
				guitext "models"
				guitext "animation"
			]

			guistrut
			guibar
			guistrut

			guilist [
				if $shaders [
					guilist  [
						guiradio "^f0low detail" shaderdetail 1
						guistrut 1
						guiradio "^f2high detail" shaderdetail 3
						//if $hasglsl [
						//    guistrut 1
						//    guicheckbox "^f3GLSL only" forceglsl
						//]
					]
				] [
					guistrut 1
				]

				guilist [
					guicheckbox "^f2refraction"  waterrefract
					guistrut 1
					guicheckbox "^f3reflection"  waterreflect
					guistrut 1
					guicheckbox "^f0caustics"    caustics
					guistrut 1
					guicheckbox "^f0animation" vertwater
				]

				if (> $renderpath 0) [
					guilist [
						guicheckbox "^f2refraction" waterfallrefract
						guistrut 1
						guicheckbox "^f0reflection" waterfallenv
					]
				]

				if (= $renderpath 0) [
					guilist [
						if $shadowmap [
							guiradio "^f2medium quality" shadowmapsize 9 [blurshadowmap 1]
							guistrut 1
							guiradio "^f3high quality" shadowmapsize 10 [blurshadowmap 2]
						] [
							guicheckbox "^f0blob shadows" blobs
						]
					]

					if (>= $maxtmus 3) [
							guistrut 1
					]
				] [
					guilist [
						if $shadowmap [
							guiradio "^f2medium quality" shadowmapsize 9 [blurshadowmap 1]
							guistrut 1
							guiradio "^f3high quality" shadowmapsize 10 [blurshadowmap 2]
						] [
							guicheckbox "^f0blob shadows" blobs
						]
					]

					if $glare [
						glarepreset = 0
						if (= $glarescale 1) [
							if (= $blurglare 4) [glarepreset = 1]
							if (= $blurglare 7) [glarepreset = 3]
						]
						if (= $glarescale 2) [
							if (= $blurglare 3) [glarepreset = 2]
							if (= $blurglare 7) [glarepreset = 4]
						]

						guilist [
							guiradio "^f2subtle" glarepreset 1 [blurglare 4; glarescale 1]
							guistrut 1
							guiradio "^f2glowy" glarepreset 2 [blurglare 3; glarescale 2]
							guistrut 1
							guiradio "^f3soft" glarepreset 3 [blurglare 7; glarescale 1]
							guistrut 1
							guiradio "^f3intense" glarepreset 4 [blurglare 7; glarescale 2]
						]
					] [
						guistrut 1
					]
				]

				if $usetexrect [
					if $motionblur [
						guilist [
							guiradio "^f3subtle" motionblurscale 0.5
							guistrut 1
							guiradio "^f3moderate" motionblurscale 0.65
							guistrut 1
							guiradio "^f3intense" motionblurscale 0.8
						]
					] [
						guistrut 1
					]
				]

				if $grass [
					guilist [
						guiradio "^f2quick fade" grassdist 128
						guistrut 1
						guiradio "^f2moderate fade" grassdist 256
						guistrut 1
						guiradio "^f3slow fade" grassdist 512
					]
				] [
					guistrut 1
				]

				if (> $renderpath 0) [
					if $maxdynlights [
						guilist [
							guiradio "^f0medium quality" maxdynlights 3
							guistrut 1
							guiradio "^f2high quality" maxdynlights 5
						]
					] [
						guistrut 1
					]
					if $depthfx [
						guilist [
							guiradio "^f0low quality" depthfxsize 7 [depthfxrect 0; depthfxfilter 1; blurdepthfx 1]
							guistrut 1
							guiradio "^f2medium quality" depthfxsize 10 [depthfxrect 1; depthfxfilter 0; blurdepthfx 0]
							guistrut 1
							guiradio "^f3high quality" depthfxsize 12 [depthfxrect 1; depthfxfilter 0; blurdepthfx 0]
						]
					] [
						guistrut 1
					]
				]

				guistrut 1

				if $decals [
					guilist [
						guiradio "^f0quick fade" decalfade 10000 [maxdecaltris 1024]
						guistrut 1
						guiradio "^f2slow fade" decalfade 60000 [maxdecaltris 4096]
					]
				][
					guistrut 1
				]

				guistrut 1

				guilist [
					guiradio "^f0low quality" maxtexsize 256
					guistrut 1
					guiradio "^f0medium quality" maxtexsize 512
					guistrut 1
					guiradio "^f2high quality" maxtexsize 0
				]
				guilist [
					guiradio "No Reduce" texreduce 0
					guistrut 1
					guiradio "Some Reduce" texreduce 7
					guistrut 1
					guiradio "Max Reduce" texreduce 12
				
				]
				guilist [
					guicheckbox "^f0lighting"    lightmodels
					guistrut 1
					guicheckbox "^f0reflection"  envmapmodels
					guistrut 1
					guicheckbox "^f0glow"        glowmodels
					if (> $renderpath 0) [
						guistrut 1
						guicheckbox "^f2bumpmap" bumpmodels
					]
				]

				guilist [
					guiradio "^f0medium quality" matskel 1
					guistrut 1
					guiradio "^f0high quality" matskel 0
				]
			]
		]
	]

	guitab    "display"
		guistayopen [
		guicheckbox "v-sync"            vsync 1 0 "" "V-Sync will synchronize your FPS with the refresh rate of your screen. In most cases, this will limit your FPS to 60." 
		guicheckbox "fullscreen"        fullscreen
		
		guitext "gamma" 0 "move this slider to adjust the overall brightness of your game. (default: 100) ^nJust the mainmenu wont be influenced by gamma-adjustments. Ingame thou, you can see much more in dark maps."
		guislider gamma
		
		
				
		guitext "field of view" 0 "That's how much you can see of the world (in degrees). Default: 100."
		guislider fov
		guistrut 1
		guilist [
			guitext "Resolution:   " 0 "The Screen-Resolution in pixels. Lower = faster, higher = prettier."
			
			customw = $scr_w
			customh = $scr_h
			guifield customw 5 [scr_w $customw]
			guitext " x " 0
			guifield customh 5 [scr_h $customh]
		]
		guilist [
			guilist [
				guitext "4:3"
				//@@@@(resbutton 320 240)
				//@@@@(resbutton 640 480)
				@@@@(resbutton 800 600)
				@@@@(resbutton 1024 768)
				//@@@@(resbutton 1152 864)
				@@@@(resbutton 1280 960)
				@@@@(resbutton 1400 1050)
				@@@@(resbutton 1600 1200)
				//@@@@(resbutton 1792 1344)
				//@@@@(resbutton 1856 1392)
				@@@@(resbutton 1920 1440)
				//@@@@(resbutton 2048 1536)
				//@@@@(resbutton 2800 2100)
				//@@@@(resbutton 3200 2400)
			]			
			guibar
			guilist [
				guitext "5:4"
				//@@@@(resbutton 600 480)
				@@@@(resbutton 800 480)
				@@@@(resbutton 1280 768)
				@@@@(resbutton 1280 1024)
				@@@@(resbutton 1600 1280)
				@@@@(resbutton 2560 2048)
			]
			guibar
			guilist [
				guitext "16:10"
				//@@@@(resbutton 320 200)
				//@@@@(resbutton 640 400)
				//@@@@(resbutton 1024 640)
				@@@@(resbutton 1280 800)
				@@@@(resbutton 1440 900)
				//@@@@(resbutton 1600 1000)
				@@@@(resbutton 1680 1050)
				@@@@(resbutton 1920 1200)
				//@@@@(resbutton 2048 1280)
				@@@@(resbutton 2560 1600)
				//@@@@(resbutton 3840 2400)
			]
			guibar
			guilist [
				guitext "16:9"
				//@@@@(resbutton 1024 600)
				@@@@(resbutton 1280 720)
				@@@@(resbutton 1366 768)
				//@@@@(resbutton 1600 900)
				@@@@(resbutton 1920 1080)
				//@@@@(resbutton 2048 1152)
				//@@@@(resbutton 3840 2160)
			]
		]	
		guistrut 1
		guibutton "^f4More.. (advanced stuff)" "showgui alldisplay"
	] //guistayopen

	guitab   "sound"
	guitext "sound volume" 0
	guislider soundvol
	guitext "music volume" 0
	guislider musicvol
	guitext "sound channels" 0
	guislider soundchans
	guitext "sound frequency" 0
	guilistslider soundfreq "11025 22050 44100"
	guitext "sound buffer length" 0
	guislider soundbufferlen
	guicheckbox "Mumble positional audio" mumble

	guitab  "mouse"

	guilist [
		guitext "mouse sensitivity: " 0
		newsens = $sensitivity
		guifield newsens 8 [sensitivity $newsens]
	]

	guilist [
		guitext "mouse UI sensitivity: " 0
		newguisens = $guisens
		guifield newguisens 8 [guisens $newguisens]
	]

	guicheckbox "invert mouse"      invmouse

	guistrut 1

	guilist [
		guibutton "crosshair: " [showgui crosshair]
		guiimage (getcrosshair) [showgui crosshair] 0.5
	]
	guitext "crosshair size" 0
	guislider crosshairsize

	guitab "keys"
	guitext "(basic keybinds, for anything more use the 'bind' command)" 0
	guitext "select action to bind and press desired keys (ESC when done)" 0

	guibar

	guilistsplit n 2 $bindactions [
		guilist [
			guitext (tabify (concatword $n ": ") 4) 0
			[newbinds@i] = (searchbinds $n)
			guikeyfield [newbinds@i] -9 [
				oldbinds = (searchbinds [@@n])
				looplist j $oldbinds [bind $j ""]
				looplist j $[newbinds@@i] [bind $j [@@@n]]
			]
		]
	] [guibar]

	guitab "console"
	guicheckbox "chat box (bottom left)" miniconfilter 0x300 0
	guibar

	guistayopen [
	  guilist [
		guilist [
			guitext "console size (lines):                  " 0
			guislider consize
			guistrut 1
			guitext "console filter:" 0
			guibitfield "important information" confilter 0x01
			guibitfield "warnings" confilter 0x02
			guibitfield "errors" confilter 0x04
			guibitfield "init messages" confilter 0x10
			guibitfield "script messages" confilter 0x20
			guibitfield "chat" confilter 0x100
			guibitfield "team chat" confilter 0x200
			guibitfield "game events" confilter 0x400
			guibitfield "self frags" confilter 0x800
			guibitfield "other player frags" confilter 0x1000
			guibitfield "team kills" confilter 0x2000
		]
		guispring
		guibar
		guilist [
			guitext "full console size (percent of screen):   " 0
			guislider fullconsize
			guistrut 1
			guitext "full console filter:" 0
			guibitfield "important information" fullconfilter 0x01
			guibitfield "warnings" fullconfilter 0x02
			guibitfield "errors" fullconfilter 0x04
			guibitfield "init messages" fullconfilter 0x10
			guibitfield "script messages" fullconfilter 0x20
			guibitfield "chat" fullconfilter 0x100
			guibitfield "team chat" fullconfilter 0x200
			guibitfield "game events" fullconfilter 0x400
			guibitfield "self frags" fullconfilter 0x800
			guibitfield "other player frags" fullconfilter 0x1000
			guibitfield "team kills" fullconfilter 0x2000
		]
		guispring
	  ]
	]

	guitab "autoexec.cfg"
	showfileeditor "autoexec.cfg" -60 17
] "game"

newgui alldisplay [
	guicheckbox "v-sync"            vsync 1 0
	guicheckbox "fullscreen"        fullscreen
	guistrut 1
	guitext "gamma (default: 100)" 0
	guislider gamma
	
	guitext "full-scene anti-aliasing (default: -1)" 0
	guilistslider fsaa "-1 0 2 4 8 16"
	guitext "color depth (default: 0)" 0
	guilistslider colorbits "0 16 24 32"
	guitext "z-buffer depth (default: 0)" 0
	guilistslider depthbits "0 16 24 32"
	guitext "stencil bits (default: 0)" 0
	guislider stencilbits
	guitext "anisotropic filtering (default: 0)" 0
	guilistslider aniso "0 2 4 8 16"
	guilist [
		guicheckbox "bilinear filtering" bilinear
		guistrut 1
		guicheckbox "trilinear filtering (mipmaps)" trilinear
	]
	guibutton "^f6Graphic Effects" "showgui postfx"

	guitab   "res"
	guitext "field of view (default: 100)" 0
	guislider fov
	guistayopen [
	  guilist [
		guilist [
			guitext "4:3"
			@@@@(resbutton 320 240)
			@@@@(resbutton 640 480)
			@@@@(resbutton 800 600)
			@@@@(resbutton 1024 768)
			@@@@(resbutton 1152 864)
			@@@@(resbutton 1280 960)
			@@@@(resbutton 1400 1050)
			@@@@(resbutton 1600 1200)
			@@@@(resbutton 1792 1344)
			@@@@(resbutton 1856 1392)
			@@@@(resbutton 1920 1440)
			@@@@(resbutton 2048 1536)
			@@@@(resbutton 2800 2100)
			@@@@(resbutton 3200 2400)
		]
		guibar
		guilist [
			guitext "16:10"
			@@@@(resbutton 320 200)
			@@@@(resbutton 640 400)
			@@@@(resbutton 1024 640)
			@@@@(resbutton 1280 800)
			@@@@(resbutton 1440 900)
			@@@@(resbutton 1600 1000)
			@@@@(resbutton 1680 1050)
			@@@@(resbutton 1920 1200)
			@@@@(resbutton 2048 1280)
			@@@@(resbutton 2560 1600)
			@@@@(resbutton 3840 2400)
		]
		guibar
		guilist [
			guitext "16:9"
			@@@@(resbutton 1024 600)
			@@@@(resbutton 1280 720)
			@@@@(resbutton 1366 768)
			@@@@(resbutton 1600 900)
			@@@@(resbutton 1920 1080)
			@@@@(resbutton 2048 1152)
			@@@@(resbutton 3840 2160)
		]
		guibar
		guilist [
			guitext "5:4"
			@@@@(resbutton 600 480)
			@@@@(resbutton 1280 1024)
			@@@@(resbutton 1600 1280)
			@@@@(resbutton 2560 2048)
		]
		guibar
		guilist [
			guitext "5:3"
			@@@@(resbutton 800 480)
			@@@@(resbutton 1280 768)

			guibar
			guitext "custom" 0
			guilist [
				customw = $scr_w
				customh = $scr_h
				guifield customw 4 [scr_w $customw]
				guifield customh 4 [scr_h $customh]
			]
		]
	  ]
	]
] "display"
